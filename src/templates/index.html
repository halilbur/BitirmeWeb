{% extends "base.html" %}

{% block content %}
<div style="text-align: center; margin-bottom: 3rem;">
    <h1 style="font-size: 3rem; margin-bottom: 1rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
        Find Your Perfect Match
    </h1>
    <p style="font-size: 1.2rem; color: #666; max-width: 600px; margin: 0 auto;">
        Upload a photo of any clothing item and our AI will find similar clothes using advanced deep learning models
    </p>
</div>

<form action="/predict" method="POST" enctype="multipart/form-data" id="uploadForm">
    <div class="upload-section" onclick="document.getElementById('clothImage').click()">
        <div class="upload-icon">
            <i class="fas fa-cloud-upload-alt"></i>
        </div>
        <h3 style="margin-bottom: 1rem;">Upload Your Clothing Image</h3>
        <p style="color: #666; margin-bottom: 1.5rem;">Drag and drop or click to browse</p>
        <label for="clothImage" class="btn">
            <i class="fas fa-image"></i> Choose Image
        </label>
        <input type="file" id="clothImage" name="image" accept="image/*" class="file-input" onchange="previewImage(this)" required>
    </div>
    
    <div class="preview-container" id="previewContainer" style="display: none;">
        <img id="imagePreview" class="preview-image" style="display: none;">
        <div style="text-align: center; margin-top: 1rem;">
            <button type="submit" class="btn">
                <i class="fas fa-search"></i> Find Similar Clothes
            </button>
        </div>
    </div>
</form>

<div class="loading" id="loadingDiv">
    <div class="spinner"></div>
    <h3>Analyzing your image...</h3>
    <p>Our AI models are working to find the best matches</p>
</div>

<div style="margin-top: 4rem;">
    <h2 style="text-align: center; margin-bottom: 2rem; color: #333;">
        <i class="fas fa-brain"></i> Powered by 3 AI Models
    </h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
        <div style="text-align: center; padding: 2rem; background: rgba(102, 126, 234, 0.05); border-radius: 15px;">
            <i class="fas fa-tags" style="font-size: 2rem; color: #667eea; margin-bottom: 1rem;"></i>
            <h3>Classification Model</h3>
            <p style="color: #666;">Identifies clothing categories and types</p>
        </div>
        <div style="text-align: center; padding: 2rem; background: rgba(118, 75, 162, 0.05); border-radius: 15px;">
            <i class="fas fa-palette" style="font-size: 2rem; color: #764ba2; margin-bottom: 1rem;"></i>
            <h3>Style Analysis</h3>
            <p style="color: #666;">Analyzes patterns, colors, and design</p>
        </div>
        <div style="text-align: center; padding: 2rem; background: rgba(102, 126, 234, 0.05); border-radius: 15px;">
            <i class="fas fa-search-plus" style="font-size: 2rem; color: #667eea; margin-bottom: 1rem;"></i>
            <h3>Similarity Engine</h3>
            <p style="color: #666;">Finds the most similar items</p>
        </div>
    </div>
</div>

<script>
document.getElementById('uploadForm').addEventListener('submit', function(e) {
    const fileInput = document.getElementById('clothImage');
    if (fileInput.files.length > 0) {
        document.getElementById('loadingDiv').style.display = 'block';
    }
});

function previewImage(input) {
    if (input.files && input.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
            const preview = document.getElementById('imagePreview');
            const container = document.getElementById('previewContainer');
            preview.src = e.target.result;
            preview.style.display = 'block';
            container.style.display = 'block';
        }
        reader.readAsDataURL(input.files[0]);
    }
}
</script>
{% endblock %}